<!DOCTYPE html>
<html>
<head>
	<meta charset = "UTF-8">
	<title>Elias Hernes | Portfolio</title>
	<meta name="description" content="Game Programmer | I like tools, code architecture and debugging.">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="portfolio,programmer,tool programmer,debugging,code architecture,looking for internship,game development,game programmer,C++">
	
	<link rel = "stylesheet" type = "text/css" href = "../style.css" />
	<link rel="apple-touch-icon" sizes="57x57" href="../favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="../favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="../favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="../favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="../favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="../favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="../favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="../favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="../favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="../favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="../favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../favicon/favicon-16x16.png">
	<link rel="manifest" href="../favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="../favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">

	<link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed:400,700&display=swap" rel="stylesheet">
</head>

<body>
	<header>
		<div class="header_wrap content">
			<div class="header_title">Elias Hernes</div>
			<div class="header_subtitle">Game Programmer | I like tools, architecture and debugging.</div>
			<div class="header_nav"><nav><ul>
				<li><a href="../index.html">Home</a></li>
			</ul></nav></div>
		</div>		
	</header>

	<div class="header_padding">
		
		<div class="section project">
			<div class="content">
				<h1>PerforceDiscordWebhook</h1>

				<p>When developing <a href="punch.html">Punch</a> along with four others, we used Perforce as our source control and Discord as our communication platform.</p>
			</div>
		</div>

		<div class="section project">
			<div class="content">
				<p>Situation: I was responsible for a lot in the project. Therefore I often got contacted for help. Sometimes I was unable to figure out the problem immediately as I was e.g. on a train and Perforce does not have a phone app.</p>

				<p>Task: Be able to see changes and changelists while away from a computer.</p>

				<p>Result: PerforceDiscordWebhook! A C++ bot deployed to <a href="https://www.heroku.com/" target="_blank">Heroku (Cloud Application Platform)</a> (this means it works on both Windows and Ubuntu) that automatically sends changelists and Perforce diff2 files to Discord.</p>

				<p>Reflection: Apart from me being able to overlook all changes and helping wherever I was, it also saved us. When we were close to the deadline of Punch, I got notified there was a new changelist. When I went to look what it was, I saw that a couple of files had been deleted. <br>
				I quickly launched the game and some UI elements were gone. I immediately reverted the deletion on Perforce and was happy I created and set up the bot.</p>
			</div>
		</div>

		<div class="section project">
			<div class="content">
				<p>Bot process:</p>
				<ul>
					<li>Fetches the latest 5 changes every 3 minutes (As we were a small team of 5)</li>
					<li>Writes a simple "cache file" called cl.txt with the latest update(s) it sent</li>
					<li>Compares what it found to this cache file to know if there are any unsynced changes</li>
					<li>Will process and parse the information of the changes into JSON to send to Discord with curl through a webhook</li>
					<li>Will generate a .html if the change is an edit, with the information of the standard diff2 of Perforce</li>
					<li>Uses a Github repo that has Github Pages enabled to upload these htmls to and adds them as links to the webhook</li>
				</ul>
			</div>
		</div>

		<div class="section project">
			<div class="content">
				<p>There are multiple versions, as I wanted to broaden my coding skills.
					<ul>
						<li>I started with Ruby, as I had used the Ruby Discord API before. But found out it didn't support an extended diff file, so it did not fit the requirements.</li>
						<li>Then I wrote the entire thing again but in C#. But apparently the C# Perforce API only supports Windows, so that didn't fit the requirement of running on Heroku.</li>
						<li>Finally I wrote it in C++, which met all the requirements.</li>
					</ul>
				</div>
		</div>

		<div class="section project">
			<div class="content">
				<p>On the GitHub of the C++ version, there's a manual how to set it up yourself.</p>

				<p>C++ source code is available <a href="https://github.com/Kuuyo/PerforceDiscordWebhookCpp" target="_blank">here</a> on GitHub. (Deployable on Heroku)<br>

				C# source code is available <a href="https://github.com/Kuuyo/PerforceDiscordWebhookNET" target="_blank">here</a> on GitHub. (Windows only, Perforce API restriction)<br>

				Ruby source code is available <a href="https://github.com/Kuuyo/PerforceDiscordWebhook" target="_blank">here</a> on GitHub. (Minimal version)
				</p>
			</div>
		</div>

		<div class="section project">
			<div class="content media">
				<img src="../img/pdw_screenshot.png">
				<img src="../img/pdw_screenshot2.png">
			</div>		
		</div>


		<div class="section">
			<div class="content minicontact">
				<a href="https://www.linkedin.com/in/eliashernes/" class="social_small"><img src="../icons/linkedin.png"></a>
				<a href="https://github.com/Kuuyo" class="social_small"><img src="../icons/github.png"></a>
				<a href="mailto: elias.hernes@gmail.com" class="social_small"><img src="../icons/gmail.png"></a>
			</div>
		</div>
	</div>

	<footer>Â©2019 by Elias Hernes.</footer>
</body>
</html>